<html>

<head>
	<meta charset="UTF-8">
	<title>출력결과</title>
</head>

<body>
	<script>
		function solution(m, product) { // m: 예산
			let answer = 0; // 살 수 있는 최대 개수 (= 선물할 수 있는 최대 학생 수)
			let n = product.length; // 배열의 길이 (= 반 학생 수)

			// 여러 개의 선택지 중 '일부'를 골라 총합을 넘는지를 알아보는 문제
			// 	=> 먼저 '정렬'을 해야 함

			// 할인 받을 상품을 결정하고 나면 
			// 나머지는 예산에 맞춰 비용이 작은 것부터 사야 최대 개수로 상품을 살 수 있음
			//	=> 총 비용 순으로 오름차순 정렬(sort)
			// a와 b를 오름차순으로 정렬: sort((a, b) => a - b)
			// a와 b를 내림차순으로 정렬: sort((a, b) => b - a)
			// sort의 결과값이 -1(음수)이면 오름차순, 1(양수)이면 내림차순, 0이면 순서 변경 x
			// 총 상품 구입비용은 가격 + 배송비 이므로 배열 객체의 앞뒤를 더해준다
			product.sort((a, b) => (a[0] + a[1]) - (b[0] + b[1]));
			// console.log(product); // product 배열 안의 요소가 총합이 가장 작은 것부터 차례대로 나열됨

			// i가 배열의 길이(n)보다 작을 동안
			for (let i = 0; i < n; i++) {
				// i번째 상품을 할인된 가격에 구매 + 배송비까지 처리 후 
				// 예산에서 상품금액을 뺀 남은 금액을 money에 넣어준다
				// (가격만 50% 할인 가능하므로 가격에만 / 2)
				// (배송비가 매 상품마다 다르므로 가격에서 가장 크게 할인받는다 해도 배송비와 합한 결과는 다를 수 있어서 의미 없음)
				// (아직 몇 번째 상품이 최대 할인이 될지 모르니 일단 i로 하나씩 돌려주고 (= 모든 경우를 구함)
				// 남은 상품을 j로 처리해서 맨 마지막에 최대로 할인된 경우를 구한다) 
				let money = m - (product[i][0] / 2 + product[i][1]);

				// cnt 처리는 j문 안에서 한다 (i로 할인된 가격을 처리 후 최종 살 수 있는 개수 구하는 곳이 j문)
				// cnt = 구매된 상품 개수 카운트
				// 최소한 1개 이상의 상품을 살 수 있는 예산이 있다고 했고, i문에서도 하나를 샀다고 가정하므로 cnt의 최소값은 1
				let cnt = 1;

				// 남은 금액을 이용해 정렬된 순서대로 하나씩 구매
				// (i가 몇 번째인지 모르므로 j도 일단 i와 똑같이 0번째부터 배열 끝까지 돌려주고
				// if문에서 j !== i 라는 추가 조건을 건다)
				for (let j = 0; j < n; j++) {
					// j번째 상품은 절대 i번째 상품이 될 수 없음
					// (i번째를 구매하고 난 후 도는 for문이므로)

					// j가 i번째 상품이 아니고
					// i번째 상품 비용이 i번째 물건을 사고 남은 금액인 money보다 크면 
					// 더 이상 구매가 불가하므로 break
					if (j !== i && (product[j][0] + product[j][1]) > money) break;

					// j가 i번째 상품이 아니고
					// j번째 상품 비용이 money보다 작거나 같으면 구매 가능
					if (j !== i && (product[j][0] + product[j][1]) <= money) {
						// money를 j번째 상품을 사고 남은 금액으로 업데이트
						money -= product[j][0] + product[j][1];
						// 상품구매횟수 + 1
						cnt++;
					}
				}

				// answer와 cnt 중 최대값을 매번 answer에 업데이트
				//	=> 아직 for문 안이므로 최종 return하는 answer에는 최대값 cnt가 들어가게 됨
				answer = Math.max(answer, cnt);
			}

			return answer;
		}

		let arr = [
			[6, 6],
			[2, 2],
			[4, 3],
			[4, 5],
			[10, 3]
		];
		console.log(solution(28, arr));
	</script>
</body>

</html>