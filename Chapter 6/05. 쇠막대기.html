<html>

<head>
	<meta charset="UTF-8">
	<title>출력결과</title>
</head>

<body>
	<script>
		function solution(s) {
			let answer = 0;
			let stack = [];

			// 스택에 담긴 값이 기준이 아니라 바로 앞에 무엇을 뽑았는지가 중요하므로
			// for-of가 아닌 i(인덱스)로 돌아야
			for (let i = 0; i < s.length; i++) {
				// 꺼낸 값이 여는 괄호이면 스택에 추가
				if (s[i] === "(") stack.push(s[i]);

				// 꺼낸 값이 닫는 괄호이면
				else {
					// 바로 이전이 값이 무엇이든 일단 스택에서 무조건 하나 pop (이유는 아래에)
					stack.pop();

					// 바로 이전이 여는 괄호라면 -> 레이저 되어 사라짐 
					if (s[i - 1] === "(") answer += stack.length;

					// 바로 이전이 닫는 괄호라면 막대기가 끝난 것임
					// (스택에 들어있던 여는 괄호와 만나 사라지면서 막대기가 하나 끝남)
					// (뭔가 자른 게 없으므로 개수는 막대기의 마지막 조각 1개만 추가)
					else answer += 1;
				}
			}

			return answer;
		}

		let a = "(((()(()()))(())()))(()())";
		console.log(solution(a));
	</script>
</body>

</html>